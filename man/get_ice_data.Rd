% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/get_ice_data.R
\name{get_ice_data}
\alias{get_ice_data}
\title{Download and clean Insurance Control Elements tables}
\usage{
get_ice_data(
  years = 2012,
  ice_url =
    "https://pubfs-rma.fpac.usda.gov/pub/References/insurance_control_elements/PASS/",
  selected_ice = NULL
)
}
\arguments{
\item{years}{Integer vector of calendar years to download (e.g. \code{2012:2020}). Defaults to \code{2012}.}

\item{ice_url}{Character string giving the base URL of the ICE directory on the RMA FTP site.
Must end with a slash. Defaults to
\code{"https://pubfs-rma.fpac.usda.gov/pub/References/insurance_control_elements/PASS/"}.}

\item{selected_ice}{Character vector of keyword(s) or regular expressions to filter the filenames.
Only ICE files whose names match at least one element of \code{selected_ice} will be
downloaded. If \code{NULL}, all “YTD” files are processed.}
}
\value{
A single \code{data.table} (invisibly coercible to \code{data.frame}) containing the cleaned
ICE data for all requested years. If no matching files are found or all downloads
fail, returns an empty \code{data.table}.
}
\description{
\code{get_ice_data()} retrieves all “YTD” ICE (Insurance Control Elements) text files
from the specified directory on the RMA public FTP site for one or more years,
downloads them to a temporary location, reads them as pipe-delimited data,
applies internal cleaning routines, and returns the combined dataset. Original
text files are discarded after reading.
}
\examples{
\dontrun{
# Download & process ICE tables for 2018 and 2019,
# filtering for any file with “IceAOExpenseSubsidy” in its name
ice_df <- get_ice_data(
  years        = 2018:2019,
  selected_ice = "IceAOExpenseSubsidy"
)
}
}
